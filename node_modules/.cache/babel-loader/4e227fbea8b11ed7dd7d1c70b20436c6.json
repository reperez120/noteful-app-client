{"ast":null,"code":"var _jsxFileName = \"/Users/rachelemilyperez/projects/noteful-app/noteful-app-client/src/App/App.js\";\nimport React, { Component } from 'react';\nimport { Route, Link } from 'react-router-dom';\nimport { withRouter } from 'react-router-dom';\nimport NoteListNav from '../NoteListNav/NoteListNav';\nimport NotePageNav from '../NotePageNav/NotePageNav';\nimport NoteListMain from '../NoteListMain/NoteListMain';\nimport NotePageMain from '../NotePageMain/NotePageMain';\nimport AddFolder from '../AddFolder/AddFolder';\nimport AddNote from '../AddNote/AddNote';\nimport EditNote from '../EditNote/EditNote';\nimport EditFolder from '../EditFolder/EditFolder';\nimport ApiContext from '../ApiContext';\nimport config from '../config';\nimport './App.css';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      folders: [],\n      content: [] // notes: []\n      // notes: [\n      //     {id: 8,\n      //     name: \"Wolves\"},\n      //     {id: 4, \n      //     name: \"Birds\"},\n      //     {id: 5, \n      //      name: \"Bears\"}\n      // ]\n\n    };\n\n    this.addFolder = folder => {\n      this.setState({\n        folders: [...this.state.folders, folder]\n      });\n    };\n\n    this.mergeFoldersAndNotes = (folders, notes) => {\n      notes.forEach(note => {\n        const index = folders.findIndex(f => f.id === note.folder);\n\n        if (!folders[index].notes) {\n          folders[index].notes = [];\n        }\n\n        folders[index].notes.push({\n          id: note.id,\n          name: note.name\n        });\n      });\n      return folders;\n    };\n\n    this.addNote = (folders, note) => {\n      folders.notes.push({\n        id: note.id,\n        name: note.name\n      });\n    };\n\n    this.updateNote = editedNote => {\n      const newNotes = this.state.map(note => note.id === editedNote.id ? editedNote : note);\n      this.setState({\n        notes: newNotes\n      });\n    };\n\n    this.updateFolder = updatedFolder => {\n      const newFolders = this.state.folders.map(folder => folder.id === updatedFolder.id ? updatedFolder : folder);\n      this.setState({\n        folders: newFolders\n      });\n    };\n\n    this.handleDeleteNote = noteId => {\n      this.setState({\n        notes: this.state.notes.filter(note => note.id !== noteId)\n      });\n      this.props.history.push(\"/\");\n    };\n\n    this.handleDeleteFolder = folderId => {\n      this.setState({\n        folders: this.state.folders.filter(folder => folder.id !== folderId)\n      });\n    };\n\n    this.getNotes = () => {\n      this.state.EditNotefolders.forEach(folder => {\n        let notes = \"\".concat(folder.notes);\n        this.setState({\n          notes: notes\n        });\n      });\n    };\n\n    this.getContent = folderId => {\n      let folders = this.state.folders;\n      folders.forEach(function (folderSummary, folderId) {\n        let content = folders[folderId].notes.length;\n        this.setState({\n          content: content\n        });\n        console.log(this.state.content);\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getContent(folderId);\n    Promise.all([fetch(\"\".concat(config.API_ENDPOINT, \"/api/notes\")), fetch(\"\".concat(config.API_ENDPOINT, \"/api/folders\"))]).then(([notesRes, foldersRes]) => {\n      if (!notesRes.ok) return notesRes.json().then(e => Promise.reject(e));\n      if (!foldersRes.ok) return foldersRes.json().then(e => Promise.reject(e));\n      return Promise.all([notesRes.json(), foldersRes.json()]);\n    }).then(([notes, folders]) => {\n      const data = this.mergeFoldersAndNotes(folders, notes);\n      this.setState({\n        folders: data\n      });\n    }).catch(error => {\n      console.error({\n        error\n      });\n    });\n  }\n\n  renderNavRoutes() {\n    // let folders  = this.state.folders;\n    // console.log(this.state.folders[0])\n    // folders.forEach((folder) =>  console.log(`${folder.notes}`));\n    // let folders = this.state.folders\n    // folders.forEach(function(folderSummary, i) {\n    //     let content = folders[1].notes.length\n    //     console.log(content)\n    // } )\n    // }\n    // getContent()\n    let folders = this.state.folders;\n    folders.forEach(function (folderSummary, i) {\n      let content = folders[i].notes.length;\n      console.log(content);\n    });\n    return React.createElement(React.Fragment, null, ['/', '/folder/:folderId'].map(path => React.createElement(Route, {\n      exact: true,\n      key: path,\n      path: path,\n      component: NoteListNav,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    })), React.createElement(Route, {\n      path: \"/note/:noteId\",\n      component: NotePageNav,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/add-folder\",\n      component: NotePageNav,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/add-note\",\n      component: NotePageNav,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/folder/:folderId\",\n      component: NotePageNav,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }));\n  }\n\n  renderMainRoutes() {\n    return React.createElement(React.Fragment, null, ['/', '/folder/:folderId'].map(path => React.createElement(Route, {\n      exact: true,\n      key: path,\n      path: path,\n      component: NoteListMain,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    })), React.createElement(Route, {\n      path: \"/note/:noteId\",\n      component: NotePageMain,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/add-folder\",\n      render: history => React.createElement(AddFolder, {\n        addFolder: this.addFolder,\n        folders: this.state.folders,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/add-note\",\n      render: history => React.createElement(AddNote, {\n        addNewNote: this.addNewNote,\n        folders: this.state.folders,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/folders/:folderId/edit\",\n      component: EditFolder,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"notes/:noteId/edit\",\n      component: EditNote,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }));\n  }\n\n  render() {\n    const value = {\n      folders: this.state.folders,\n      notes: this.state.notes,\n      deleteNote: this.handleDeleteNote,\n      deleteFolder: this.handleDeleteFolder,\n      addNote: this.addNote,\n      addFolder: this.addFolder,\n      updateFolder: this.updateFolder,\n      updateNote: this.updateNote\n    };\n    return React.createElement(ApiContext.Provider, {\n      value: value,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, React.createElement(\"nav\", {\n      className: \"App__nav\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, this.renderNavRoutes()), React.createElement(\"header\", {\n      className: \"App__header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, \"Noteful\"), ' ')), React.createElement(\"main\", {\n      className: \"App__main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, this.renderMainRoutes())));\n  }\n\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/rachelemilyperez/projects/noteful-app/noteful-app-client/src/App/App.js"],"names":["React","Component","Route","Link","withRouter","NoteListNav","NotePageNav","NoteListMain","NotePageMain","AddFolder","AddNote","EditNote","EditFolder","ApiContext","config","App","state","folders","content","addFolder","folder","setState","mergeFoldersAndNotes","notes","forEach","note","index","findIndex","f","id","push","name","addNote","updateNote","editedNote","newNotes","map","updateFolder","updatedFolder","newFolders","handleDeleteNote","noteId","filter","props","history","handleDeleteFolder","folderId","getNotes","EditNotefolders","getContent","folderSummary","length","console","log","componentDidMount","Promise","all","fetch","API_ENDPOINT","then","notesRes","foldersRes","ok","json","e","reject","data","catch","error","renderNavRoutes","i","path","renderMainRoutes","addNewNote","render","value","deleteNote","deleteFolder"],"mappings":"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","sourcesContent":["\nimport React, {Component} from 'react';\nimport {Route, Link} from 'react-router-dom';\nimport {withRouter} from 'react-router-dom';\nimport NoteListNav from '../NoteListNav/NoteListNav';\nimport NotePageNav from '../NotePageNav/NotePageNav';\nimport NoteListMain from '../NoteListMain/NoteListMain';\nimport NotePageMain from '../NotePageMain/NotePageMain';\nimport AddFolder from '../AddFolder/AddFolder';\nimport AddNote from '../AddNote/AddNote';\nimport EditNote from '../EditNote/EditNote';\nimport EditFolder from '../EditFolder/EditFolder';\nimport ApiContext from '../ApiContext';\nimport config from '../config';\nimport './App.css'\n\nclass App extends Component {\n\n    state = {\n        folders: [],\n        content: []\n        // notes: []\n        // notes: [\n        //     {id: 8,\n        //     name: \"Wolves\"},\n        //     {id: 4, \n        //     name: \"Birds\"},\n        //     {id: 5, \n        //      name: \"Bears\"}\n\n        // ]\n    }\n\n    addFolder = folder => {\n        this.setState({ \n            folders: [ ...this.state.folders, folder \n        ]})\n    }\n\n    mergeFoldersAndNotes = (folders, notes) => {\n        notes.forEach((note) => {\n          const index = folders.findIndex(f => f.id === note.folder) \n          if (!folders[index].notes) {\n            folders[index].notes = []\n          }\n          folders[index].notes.push({ \n            id: note.id, \n            name: note.name \n          })\n          })\n        return folders\n      }\n\n      addNote = (folders, note) => {\n        folders.notes.push({ \n            id: note.id, \n            name: note.name \n        })\n    };\n\n    updateNote = editedNote  => {\n        const newNotes = this.state.map(note =>\n            (note.id === editedNote.id)\n            ? editedNote\n            : note\n            )\n        this.setState({\n            notes: newNotes\n        })\n    }\n\n    updateFolder = updatedFolder => {\n        const newFolders = this.state.folders.map(folder =>\n          (folder.id === updatedFolder.id)\n            ? updatedFolder\n            : folder\n        )\n        this.setState({\n        folders: newFolders\n        })\n    };\n\n    handleDeleteNote = noteId => {\n        this.setState({\n            notes: this.state.notes.filter(note => note.id !== noteId)\n        });\n        this.props.history.push(`/`)\n    };\n\n    handleDeleteFolder = folderId => {\n        this.setState({\n            folders: this.state.folders.filter(folder => folder.id !== folderId)\n        });\n    };\n\n    getNotes = () => {\n        this.state.EditNotefolders.forEach((folder) => {\n        let notes = `${folder.notes}`\n        this.setState ({\n            notes: notes\n        })  \n      })\n    }\n\n    getContent = folderId => {\n        let folders = this.state.folders\n        folders.forEach(function(folderSummary, folderId) {\n            let content = folders[folderId].notes.length\n            this.setState ({\n                content: content\n            })\n            console.log(this.state.content)\n        } )\n    }\n\n    componentDidMount() {\n\n        this.getContent(folderId)\n\n        Promise.all([\n            fetch(`${config.API_ENDPOINT}/api/notes`),\n            fetch(`${config.API_ENDPOINT}/api/folders`)\n        ])\n            .then(([notesRes, foldersRes]) => {\n               \n                if (!notesRes.ok)\n                    return notesRes.json().then(e => Promise.reject(e));\n                if (!foldersRes.ok)\n                    return foldersRes.json().then(e => Promise.reject(e));\n                    \n                    return Promise.all([notesRes.json(), foldersRes.json()]);\n            })\n            .then(([notes, folders]) => {\n               const data = this.mergeFoldersAndNotes(folders, notes)\n\n                this.setState({folders: data});\n            })\n            .catch(error => {\n                console.error({error});\n            });\n    };\n\n    renderNavRoutes() {\n        // let folders  = this.state.folders;\n        // console.log(this.state.folders[0])\n        // folders.forEach((folder) =>  console.log(`${folder.notes}`));\n            // let folders = this.state.folders\n            // folders.forEach(function(folderSummary, i) {\n            //     let content = folders[1].notes.length\n            //     console.log(content)\n            // } )\n        // }\n        // getContent()\n\n        let folders = this.state.folders\n            folders.forEach(function(folderSummary, i) {\n                let content = folders[i].notes.length\n                console.log(content)\n            } )\n\n    return (\n            <>\n                {['/', '/folder/:folderId'].map(path => (\n                    <Route\n                        exact\n                        key={path}\n                        path={path}\n                        component={NoteListNav}\n                    />\n                ))}\n                <Route path=\"/note/:noteId\" component={NotePageNav} />\n                <Route path=\"/add-folder\" component={NotePageNav} />\n                <Route path=\"/add-note\" component={NotePageNav} />\n                <Route path=\"/folder/:folderId\" component={NotePageNav} />\n            </>\n        );\n    }\n\n    renderMainRoutes() {\n   \n        return (\n            <>\n                {['/', '/folder/:folderId'].map(path => (\n                    <Route\n                        exact\n                        key={path}\n                        path={path}\n                        component={NoteListMain}\n                    />\n                ))}\n                <Route \n                    path=\"/note/:noteId\" \n                    component={NotePageMain} \n                />\n\n                <Route path='/add-folder' \n                    render={(history) =>\n                <AddFolder\n                    addFolder={this.addFolder}\n                    folders ={this.state.folders} \n                />}\n                />\n               <Route path='/add-note'\n                render={(history) =>\n                    <AddNote\n                        addNewNote = {this.addNewNote}\n                        folders ={this.state.folders} \n                    /> }\n                />\n                <Route \n                    path='/folders/:folderId/edit'\n                    component={EditFolder} \n                    /> \n\n                <Route \n                    path='notes/:noteId/edit'\n                    component={EditNote} \n                    /> \n            </>\n        );\n    }\n\n    render() {\n\n        const value = {\n        folders: this.state.folders,\n        notes: this.state.notes,\n        deleteNote: this.handleDeleteNote,\n        deleteFolder: this.handleDeleteFolder,\n        addNote: this.addNote,\n        addFolder: this.addFolder,\n        updateFolder: this.updateFolder,\n        updateNote: this.updateNote\n        };\n       \n        return (\n            <ApiContext.Provider value={value}>\n                <div className=\"App\">\n                    <nav className=\"App__nav\">{this.renderNavRoutes()}</nav>\n                    <header className=\"App__header\">\n                        <h1>\n                            <Link to=\"/\">Noteful</Link>{' '}\n                        </h1>\n                    </header>\n                    <main className=\"App__main\">{this.renderMainRoutes()}</main>\n                </div>\n            </ApiContext.Provider>\n        );\n    }\n}\n\nexport default withRouter(App)\n"]},"metadata":{},"sourceType":"module"}