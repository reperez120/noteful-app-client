(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){},203:function(e,t,n){},204:function(e,t,n){},205:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(79),l=n.n(o),c=n(8),i=(n(89),n(39)),s=n(83),d=n(2),u=n(3),m=n(5),h=n(4),f=n(6),p=n(16),E=n(26),v=n(25);n(90);function N(e){e.tag,e.className,e.childrenm;var t=Object(v.a)(e,["tag","className","childrenm"]);return r.a.createElement(e.tag,Object(E.a)({className:["NavAddButton",e.className].join(" ")},t),e.children)}N.defaultProps={tag:"a"};var b=r.a.createContext({render:function(){}}),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find(function(e){return e.id===Number(t)})},j=(n(91),{API_ENDPOINT:"http://localhost:8000"}),y=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleClickDelete=function(e){e.preventDefault();var t=n.props.id;fetch("".concat(j.API_ENDPOINT,"/api/folders/").concat(t),{method:"DELETE"}).then(function(e){return console.log(e),e.ok?e:e.json().then(function(e){return Promise.reject(e)})}).then(function(){n.context.deleteFolder(t)}).catch(function(e){console.error({error:e})})},n.handleClickEdit=function(e){e.preventDefault();var t=n.props.id;fetch("".concat(j.API_ENDPOINT,"/api/folders/folderId"),{method:"PATCH"}).then(function(e){return console.log(e),e.ok?e:e.json().then(function(e){return Promise.reject(e)})}).then(function(){n.context.updateFolder(t)}).catch(function(e){console.error({error:e})})},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.context,n=t.folders,a=void 0===n?[]:n,o=t.notes,l=void 0===o?[]:o;return r.a.createElement("div",{className:"NoteListNav"},r.a.createElement("ul",{className:"NoteListNav__list"},a.map(function(t){return r.a.createElement("li",{key:t.id},r.a.createElement(c.c,{className:"NoteListNav__folder-link",to:"/folder/".concat(t.id)},r.a.createElement("span",{className:"NoteListNav__num-notes"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter(function(e){return e.folderId===t}).length}(l,t.id)),t.name,r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{className:"Folder_delete",type:"button",onClick:e.handleClickDelete},"remove"),r.a.createElement("button",{className:"Folder_edit",type:"button",onClick:e.handleClickEdit},"edit"))))})),r.a.createElement("div",{className:"NoteListNav__button-wrapper"},r.a.createElement(N,{tag:c.b,to:"/add-folder",type:"button",className:"NoteListNav__add-folder-button"},"Add Folder",r.a.createElement("br",null))))}}]),t}(r.a.Component);y.defaultProps={folders:[],onDeleteFolder:function(){},onEditFolder:function(){}},y.contextType=b;var O=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={hasError:!1},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.state.hasError?r.a.createElement("h2",null,"There was an error."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(a.Component),k=(n(100),function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.context,n=t.notes,a=t.folders,o=this.props.match.params.noteId,l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find(function(e){return e.id===t})}(a,(g(n,o)||{}).folderId);return r.a.createElement("div",{className:"NotePageNav"},r.a.createElement(O,null,r.a.createElement(N,{tag:"button",role:"link",onClick:function(){return e.props.history.goBack()},className:"NotePageNav__back-button"},r.a.createElement("br",null),"Back"),l&&r.a.createElement("h3",{className:"NotePageNav__folder-name"},l.name)))}}]),t}(r.a.Component));k.defaultProps={history:{goBack:function(){}},match:{params:{}}},k.contextType=b;var F=n(82),w=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),fetch("http://localhost:8000/api/notes{$noteId}",{method:"PATCH",body:JSON.stringify(n.state.inputValues)}).then(function(e){if(!e.ok)throw new Error("Something went wrong, please try again later");return e.json()}).then(function(e){n.context.updateNote(e)}).catch(function(e){n.setState({error:e.message})})},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.articleId;fetch("http://localhost:8000/api/notes{$noteId}",{method:"GET"}).then(function(e){if(!e.ok)throw new Error("Something went wrong, please try again later");return e.json()}).then(function(t){e.setState({})}).catch(function(t){e.setState({error:t.message})})}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.content,a=e.folders;return r.a.createElement("section",{className:"EditNote"},r.a.createElement("h2",null,"Edit Note"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"name-input"},"Name"),r.a.createElement("input",{type:"text",id:"name",name:"name",value:t,onChange:this.handleNameChange})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"content-input"},"Name"),r.a.createElement("input",{type:"text",id:"content",name:"content",value:n,onChange:this.handleContentChange})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"note-folder-select"},"Folder"),r.a.createElement("select",{id:"selectedFolder",name:"selectedFolder"},r.a.createElement("option",{value:null},"..."),a.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{type:"submit"},"Edit note"))))}}]),t}(a.Component),S=(n(203),function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleClickDelete=function(e){e.preventDefault();var t=n.props.id;fetch("".concat(j.API_ENDPOINT,"/api/notes/").concat(t),{method:"DELETE"}).then(function(e){return console.log(e),e.ok?e:e.json().then(function(e){return Promise.reject(e)})}).then(function(){n.context.deleteNote(t)}).catch(function(e){console.error({error:e})})},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.id,a=e.content,o=e.modified;return console.log(this.props),r.a.createElement("div",{className:"Note"},r.a.createElement("h2",{className:"Note__title"},r.a.createElement(c.b,{to:"/note/".concat(n)},t)),r.a.createElement("button",{className:"Note__delete",type:"button",onClick:this.handleClickDelete}," ","remove"),r.a.createElement(c.b,{to:"/edit/:noteId"},"Edit Note"),r.a.createElement("div",{className:"Note__dates"},r.a.createElement("div",{className:"Note__dates-modified"},"Modified"," ",r.a.createElement("span",{className:"Date"},Object(F.format)(o,"YYYY MMM Do")))),r.a.createElement("div",{className:"NotePageMain__content"}),r.a.createElement("p",null,(a||"").replace(/\n\n/g,"</p> <p>").replace(/\n/g,"<br />")))}}]),t}(r.a.Component));S.defaultProps={folders:[],onDeleteNote:function(){},notes:[]},S.contextType=b;n(204);var _=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.match.params.folderId,t=this.context.notes,n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t?e.filter(function(e){return e.folderId===t}):e}(void 0===t?[]:t,e);return r.a.createElement("section",{className:"NoteListMain"},r.a.createElement(O,null,r.a.createElement("ul",null,n.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(S,{id:e.id,name:e.name,modified:e.date}))})),r.a.createElement("div",{className:"NoteListMain__button-container"},r.a.createElement(N,{tag:c.b,to:"/add-note",type:"button",className:"NoteListMain__add-note-button"},"Add Note",r.a.createElement("br",null)))))}}]),t}(r.a.Component);_.defaultProps={match:{params:{}}},_.contextType=b;n(205);var C=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).call(this,e))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.context.notes,t=void 0===e?[]:e;console.log(t,this.props);var n=this.props.match.params.noteId,a=g(t,n)||{content:""};return console.log(a),r.a.createElement("section",{className:"NotePageMain"},r.a.createElement(O,null,r.a.createElement(S,{id:a.id,name:a.name,content:a.content,modified:a.date})))}}]),t}(r.a.Component);C.defaultProps={match:{params:{}}},C.contextType=b;n(206);function P(e){var t=e.className,n=Object(v.a)(e,["className"]);return r.a.createElement("form",Object.assign({className:["Noteful-form",t].join(" "),action:"#"},n))}n(207);var I=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={error:null},n.handleFolderSubmit=function(e){e.preventDefault();var t=e.target.name,a={name:t.value};n.setState({error:null});var r={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(a)};fetch("http://localhost:8000/api/folders",r).then(function(e){if(!e.ok)throw new Error("Something went wrong, please try again later");return e.json()}).then(function(e){console.log(t),t.value="",console.log(t),console.log(e),n.props.addNewFolder(e),n.props.history.push("/")}).catch(function(e){n.setState({error:e.message})})},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"AddFolder"},r.a.createElement(O,null,r.a.createElement("h2",null,"Create a folder"),r.a.createElement(P,{onSubmit:this.handleFolderSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"name-input"},"Name"),r.a.createElement("input",{type:"text",id:"name",name:"name"})),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{type:"submit"},"Add folder")))))}}]),t}(a.Component),D=Object(p.d)(I);function A(e){return e.hasError?r.a.createElement("div",{className:"error"},e.message):r.a.createElement(r.a.Fragment,null)}n(208);var x=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleNoteSubmit=function(e){e.preventDefault();var t=e.target,a=t.name,r=t.selectedFolder,o=t.content,l={name:a.value,folder:r.value,content:o.value,date:new Date};console.log(l);var c={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(l)};n.setState({error:null}),fetch("http://localhost:8000/api/notes",c).then(function(e){if(!e.ok)throw new Error("Something went wrong, please try again later");return e.json()}).then(function(e){n.props.addNewNote(e),n.props.history.push("/")}).catch(function(e){n.setState({error:e.message})})},n.state={name:"",nameValid:!1,formValid:!1,validationMessage:{name:""}},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"verifyNameLength",value:function(e){var t=this;this.setState({name:e},function(){t.validateName(e)})}},{key:"validateName",value:function(e){var t=Object(E.a)({},this.state.validationMessage),n=!1;0===(e=e.trim()).length?(t.name="A note name is required.",n=!0):(t.name="",n=!1),this.setState({validationMessage:t,nameValid:!n},this.formValid)}},{key:"formValid",value:function(){this.setState({formValid:this.state.nameValid})}},{key:"render",value:function(){var e=this,t=this.props.folders;return r.a.createElement("section",{className:"AddNote"},r.a.createElement(O,null,r.a.createElement("h2",null,"Create a note"),r.a.createElement(P,{onSubmit:this.handleNoteSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"note-name-input"},"Name"),r.a.createElement("input",{type:"text",id:"name",name:"name",onChange:function(t){return e.verifyNameLength(t.target.value)}}),r.a.createElement(A,{hasError:!this.state.nameVaild,message:this.state.validationMessage.name})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"note-content-input"},"Content"),r.a.createElement("textarea",{type:"text",id:"content",name:"content"})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"note-folder-select"},"Folder"),r.a.createElement("select",{id:"selectedFolder",name:"selectedFolder"},r.a.createElement("option",{value:null},"..."),t.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{type:"submit",disabled:!this.state.formValid},"Add note")))))}}]),t}(a.Component),T=Object(p.d)(x),M=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),fetch("http://localhost:8000/api/folders/${this.props.match.params.folderId}",{method:"PATCH",body:JSON.stringify(n.state.inputValues)}).then(function(e){if(!e.ok)throw new Error("Something went wrong, please try again later");return e.json()}).then(function(e){n.context.updateFolder(e)}).catch(function(e){n.setState({error:e.message})})},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.articleId;fetch("http://localhost:8000/api/folders/${this.props.match.params.folderId}",{method:"GET"}).then(function(e){if(!e.ok)throw new Error("Something went wrong, please try again later");return e.json()}).then(function(t){e.setState({})}).catch(function(t){e.setState({error:t.message})})}},{key:"render",value:function(){var e=this.state.name;return r.a.createElement("section",{className:"EditFolderForm"},r.a.createElement("h2",null,"Edit Folder"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"name-input"},"Name"),r.a.createElement("input",{type:"text",id:"name",name:"name",value:e,onChange:this.handleNameChange})),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{type:"submit"},"Edit folder"))))}}]),t}(a.Component),L=(n(209),function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={folders:[]},n.addFolder=function(e){n.setState({folders:[].concat(Object(s.a)(n.state.folders),[e])})},n.mergeFoldersAndNotes=function(e,t){return t.forEach(function(t){var n=e.findIndex(function(e){return e.id===t.folder});e[n].notes||(e[n].notes=[]),e[n].notes.push({id:t.id,name:t.name})}),e},n.addNote=function(e,t){e.notes.push({id:t.id,name:t.name})},n.updateFolder=function(e){var t=n.state.map(function(t){return t.id===e.id?e:t});n.setState({notes:t})},n.handleDeleteFolder=function(e){n.setState({folders:n.state.folders.filter(function(t){return t.id!==e})})},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;Promise.all([fetch("".concat(j.API_ENDPOINT,"/api/notes")),fetch("".concat(j.API_ENDPOINT,"/api/folders"))]).then(function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1];return n.ok?a.ok?Promise.all([n.json(),a.json()]):a.json().then(function(e){return Promise.reject(e)}):n.json().then(function(e){return Promise.reject(e)})}).then(function(t){var n=Object(i.a)(t,2),a=n[0],r=n[1],o=e.mergeFoldersAndNotes(r,a);e.setState({folders:o})}).catch(function(e){console.error({error:e})})}},{key:"renderNavRoutes",value:function(){return r.a.createElement(r.a.Fragment,null,["/","/folder/:folderId"].map(function(e){return r.a.createElement(p.a,{exact:!0,key:e,path:e,component:y})}),r.a.createElement(p.a,{path:"/note/:noteId",component:k}),r.a.createElement(p.a,{path:"/add-folder",component:k}),r.a.createElement(p.a,{path:"/add-note",component:k}),r.a.createElement(p.a,{path:"/folder/:folderId",component:k}))}},{key:"renderMainRoutes",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,["/","/folder/:folderId"].map(function(e){return r.a.createElement(p.a,{exact:!0,key:e,path:e,component:_})}),r.a.createElement(p.a,{path:"/note/:noteId",component:C}),r.a.createElement(p.a,{path:"/add-folder",render:function(t){return r.a.createElement(D,{addNewFolder:e.addNewFolder})}}),r.a.createElement(p.a,{path:"/add-note",render:function(t){return r.a.createElement(T,{addNewNote:e.addNewNote,folders:e.state.folders})}}),r.a.createElement(p.a,{path:"/edit/:noteId",render:function(t){return r.a.createElement(w,{editNote:e.EditNote,folders:e.state.folders})}}),r.a.createElement(p.a,{path:"/edit/:folderId",render:function(t){return r.a.createElement(M,{editFolder:e.EditFolder,folders:e.state.folders})}}))}},{key:"render",value:function(){console.log(this.state.folders),console.log(this.state.folders.notes),console.log(this.state.folders[0]);var e={folders:this.state.folders,notes:this.state.notes,deleteNote:this.handleDeleteNote,deleteFolder:this.handleDeleteFolder,addNote:this.addNote,updateFolder:this.updateFolder};return r.a.createElement(b.Provider,{value:e},r.a.createElement("div",{className:"App"},r.a.createElement("nav",{className:"App__nav"},this.renderNavRoutes()),r.a.createElement("header",{className:"App__header"},r.a.createElement("h1",null,r.a.createElement(c.b,{to:"/"},"Noteful")," ")),r.a.createElement("main",{className:"App__main"},this.renderMainRoutes())))}}]),t}(a.Component)),V=Object(p.d)(L);l.a.render(r.a.createElement(c.a,null,r.a.createElement(V,null)),document.getElementById("root"))},84:function(e,t,n){e.exports=n(210)},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){}},[[84,1,2]]]);
//# sourceMappingURL=main.67d50a3c.chunk.js.map