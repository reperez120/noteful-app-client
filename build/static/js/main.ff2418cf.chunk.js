(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{200:function(e,t,n){},201:function(e,t,n){},202:function(e,t,n){},203:function(e,t,n){},204:function(e,t,n){},205:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(80),c=n.n(r),l=n(8),i=(n(89),n(42)),s=n(17),d=n(23),u=n(2),m=n(3),f=n(5),h=n(4),p=n(6),v=n(13),N=n(28);n(90);function E(e){e.tag,e.className,e.childrenm;var t=Object(N.a)(e,["tag","className","childrenm"]);return o.a.createElement(e.tag,Object(s.a)({className:["NavAddButton",e.className].join(" ")},t),e.children)}E.defaultProps={tag:"a"};var b=o.a.createContext({render:function(){console.log("context",this);this.folders,this.addFolder,this.addNote,this.deleteNote,this.updateNote,this.updateFolder,this.deleteFolder}}),g=(n(91),{API_ENDPOINT:"https://rocky-gorge-29682.herokuapp.com"}),y=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={noteLength:null},n.handleClickDelete=function(e,t){t.preventDefault(),fetch("".concat(g.API_ENDPOINT,"/api/folders/").concat(e),{method:"DELETE"}).then(function(e){return e.ok?e:e.json().then(function(e){return Promise.reject(e)})}).then(function(){n.context.deleteFolder(e)}).catch(function(e){console.error({error:e})})},n.countNotes=function(e){if(!e.length)return e;e.forEach(function(e){if(e.notes=e.notes||[],e.notes.length)return e.notes.length})},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.context.folders,n=void 0===t?{}:t;return this.countNotes(n),o.a.createElement("div",{className:"NoteListNav"},o.a.createElement("ul",{className:"NoteListNav__list"},n.map(function(t){return o.a.createElement("li",{key:t.id},o.a.createElement(l.c,{className:"NoteListNav__folder-link",to:"/folder/".concat(t.id)},o.a.createElement("span",{className:"NoteListNav__num-notes"},e.countNotes(n),t.notes.length),t.name,o.a.createElement("span",{className:"Content"}),o.a.createElement("div",{className:"buttons"},o.a.createElement("button",{className:"Folder_delete",type:"button",onClick:e.handleClickDelete.bind(null,t.id)},"remove"),o.a.createElement("div",{className:"editFolder"},o.a.createElement(l.b,{to:"/folders/".concat(t.id,"/edit")},"edit")))))})),o.a.createElement("div",{className:"NoteListNav__button-wrapper"},o.a.createElement(E,{tag:l.b,to:"/add-folder",type:"button",className:"NoteListNav__add-folder-button"},"Add Folder",o.a.createElement("br",null))))}}]),t}(o.a.Component);y.defaultProps={folders:[]},y.contextType=b;var j=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).state={hasError:!1},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return this.state.hasError?o.a.createElement("h2",null,"There was an error."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(a.Component),O=(n(97),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).findFolder=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find(function(e){return e.id===t})},n.findNote=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find(function(e){return e.id===Number(t)})},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.match.params.noteId,n=this.findNote([],t)||{},a=this.findFolder(this.context.folders,n.folder);return o.a.createElement("div",{className:"NotePageNav"},o.a.createElement(j,null,o.a.createElement(E,{tag:"button",role:"link",onClick:function(){return e.props.history.goBack()},className:"NotePageNav__back-button"},o.a.createElement("br",null),"Back"),a&&o.a.createElement("h3",{className:"NotePageNav__folder-name"},a.name)))}}]),t}(o.a.Component));O.defaultProps={history:{goBack:function(){}},match:{params:{}}},O.contextType=b;var k=n(83),F=(n(200),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).handleClickDelete=function(e,t){t.preventDefault(),fetch("".concat(g.API_ENDPOINT,"/api/notes/").concat(e),{method:"DELETE"}).then(function(e){if(!e.ok)return e.json().then(function(e){return Promise.reject(e)})}).then(function(){n.context.deleteNote(e)}).catch(function(e){console.error({error:e})})},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.id,a=e.content,r=e.modified;return o.a.createElement("div",{className:"Note"},o.a.createElement("h2",{className:"Note__title"},o.a.createElement(l.b,{to:"/note/".concat(n)},t)),o.a.createElement("div",{className:"folderButtons"},o.a.createElement("button",{className:"Note__delete",type:"button",onClick:this.handleClickDelete.bind(null,n)}," ","remove"),o.a.createElement("div",{className:"editNote"},o.a.createElement(l.b,{to:"/notes/".concat(n,"/edit")},"edit"))),o.a.createElement("div",{className:"Note__dates"},o.a.createElement("div",{className:"Note__dates-modified"},"modified:"," ",o.a.createElement("span",{className:"Date"},Object(k.format)(r,"YYYY MMM Do")))),o.a.createElement("div",{className:"NotePageMain__content"}),o.a.createElement("p",null,(a||"").replace(/\n\n/g,"</p> <p>").replace(/\n/g,"<br />")))}}]),t}(o.a.Component));F.defaultProps={folders:[],notes:[]},F.contextType=b;n(201);var S=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).getNotes=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e.length?(e.forEach(function(e){e.notes=e.notes||[],e.notes.length&&e.notes.forEach(function(n){n.folder=e.id,t.push(n)})}),t):e},n.getNotesForFolder=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t?n.getNotes(e).filter(function(e){return e.folder===+t}):n.getNotes(e)},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.context.folders,t=void 0===e?[]:e,n=this.getNotesForFolder(t,this.props.match.params.folderId)||[];return o.a.createElement("section",{className:"NoteListMain"},o.a.createElement(j,null,o.a.createElement("ul",null,n.map(function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(F,{id:e.id,name:e.name,content:e.content,modified:e.date}))})),o.a.createElement("div",{className:"NoteListMain__button-container"},o.a.createElement(E,{tag:l.b,to:"/add-note",type:"button",className:"NoteListMain__add-note-button"},"Add Note",o.a.createElement("br",null)))))}}]),t}(o.a.Component);S.defaultProps={match:{params:{}}},S.contextType=b;n(202);var _=function(e){function t(){return Object(u.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.context.folders,t=void 0===e?[]:e;var n=function(e){var n;return e=Number(e),t.find(function(t){return t.notes.find(function(t){return t.id===e&&(n=t),n})}),n}(this.props.match.params.noteId)||{};return o.a.createElement("section",{className:"NotePageMain"},o.a.createElement(j,null,o.a.createElement(F,{id:n.id,name:n.name,content:n.content,modified:n.date})))}}]),t}(o.a.Component);_.defaultProps={match:{params:{}}},_.contextType=b;n(203);function P(e){var t=e.className,n=Object(N.a)(e,["className"]);return o.a.createElement("form",Object.assign({className:["Noteful-form",t].join(" "),action:"#"},n))}n(204);var C=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).state={error:null},n.handleFolderSubmit=function(e){e.preventDefault();var t={name:e.target.name.value},a={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)};n.setState({error:null}),fetch("${config.API_ENDPOINT}/api/folders",a).then(function(e){if(!e.ok)throw new Error("Something went wrong, please try again later");return e.json()}).then(function(e){n.context.addFolder(e),n.props.history.push("/")}).catch(function(e){n.setState({error:e.message})})},n.state={name:""},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return o.a.createElement("section",{className:"AddFolder"},o.a.createElement(j,null,o.a.createElement("h2",null,"Create a folder"),o.a.createElement(P,{onSubmit:this.handleFolderSubmit},o.a.createElement("div",{className:"field"},o.a.createElement("label",{htmlFor:"name-input"},"Name"),o.a.createElement("input",{type:"text",id:"name"})),o.a.createElement("div",{className:"buttons"},o.a.createElement("button",{type:"submit",className:"addFolderButton"},"Add folder")))))}}]),t}(a.Component);C.contextType=b;var w=Object(v.e)(C);function x(e){return e.hasError?o.a.createElement("div",{className:"error"},e.message):o.a.createElement(o.a.Fragment,null)}n(205);var I=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).state={error:null},n.handleNoteSubmit=function(e){e.preventDefault();var t=e.target,a=t.name,o=t.selectedFolder,r=t.content,c={name:a.value,folder:o.value,content:r.value,date:new Date},l={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(c)};n.setState({error:null}),fetch("".concat(g.API_ENDPOINT,"/api/notes"),l).then(function(e){if(!e.ok)throw new Error("Something went wrong, please try again later");return e.json()}).then(function(e){var t=n.context.folders;n.context.addNote(t,e),n.props.history.push("/")}).catch(function(e){n.setState({error:e.message})})},n.state={name:"",nameValid:!1,formValid:!1,validationMessage:{name:""}},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"verifyNameLength",value:function(e){var t=this;this.setState({name:e},function(){t.validateName(e)})}},{key:"validateName",value:function(e){var t=Object(s.a)({},this.state.validationMessage),n=!1;0===(e=e.trim()).length?(t.name="A note name is required.",n=!0):(t.name="",n=!1),this.setState({validationMessage:t,nameValid:!n},this.formValid)}},{key:"formValid",value:function(){this.setState({formValid:this.state.nameValid})}},{key:"render",value:function(){var e=this,t=this.context.folders;return o.a.createElement("section",{className:"AddNote"},o.a.createElement(j,null,o.a.createElement("h2",null,"Create a note"),o.a.createElement(P,{onSubmit:this.handleNoteSubmit},o.a.createElement("div",{className:"field"},o.a.createElement("label",{htmlFor:"note-name-input"},"Name"),o.a.createElement("input",{type:"text",id:"name",name:"name",onChange:function(t){return e.verifyNameLength(t.target.value)}}),o.a.createElement(x,{hasError:!this.state.nameVaild,message:this.state.validationMessage.name})),o.a.createElement("div",{className:"field"},o.a.createElement("label",{htmlFor:"note-content-input"},"Content"),o.a.createElement("textarea",{type:"text",id:"content",name:"content"})),o.a.createElement("div",{className:"field"},o.a.createElement("label",{htmlFor:"note-folder-select"},"Folder"),o.a.createElement("select",{id:"selectedFolder",name:"selectedFolder"},o.a.createElement("option",{value:null},"..."),t.map(function(e){return o.a.createElement("option",{key:e.id,value:e.id},e.name)}))),o.a.createElement("div",{className:"buttons"},o.a.createElement("button",{type:"submit",className:"addNoteButton",disabled:!this.state.formValid},"Add note")))))}}]),t}(a.Component);I.contextType=b;var A=Object(v.e)(I),D=(n(206),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={error:null,id:"",name:"",content:"",folder:""},n.handleNameChange=function(e){n.setState({name:e.target.value})},n.handleContentChange=function(e){n.setState({content:e.target.value})},n.handleFolderChange=function(e){n.setState({folder:e.target.value})},n.handleSubmit=function(e){e.preventDefault();var t=e.target.name.value,a=e.target.content.value;n.setState({name:t,content:a});var o=n.props.match.params.noteId,r=n.state,c={id:r.id,name:r.name,content:r.content,folder:r.folder},l="".concat(g.API_ENDPOINT,"/").concat(o),i={method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify(c)};fetch(l,i).then(function(e){if(!e.ok)throw new Error("Something went wrong, please try again later")}).then(function(){n.context.updateNote(c),n.props.history.push("/")}).catch(function(e){n.setState({error:e.message})})},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.noteId;fetch("".concat(g.API_ENDPOINT,"/api/notes/").concat(t),{method:"GET"}).then(function(e){if(!e.ok)throw new Error("Something went wrong, please try again later");return e.json()}).then(function(t){e.setState({id:t.id,name:t.name,content:t.content,folder:t.folder})}).catch(function(t){e.setState({error:t.message})})}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.content,a=e.folder,r=this.context.folders;return o.a.createElement("section",{className:"EditNote"},o.a.createElement("h2",null,"Edit Note"),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("div",{className:"field"},o.a.createElement("label",{htmlFor:"name-input"},"Name:"),o.a.createElement("input",{type:"text",id:"name",name:"name",defaultValue:t,onChange:this.handleNameChange})),o.a.createElement("div",{className:"field"},o.a.createElement("label",{htmlFor:"note-content-input"},"Content"),o.a.createElement("textarea",{type:"text",id:"content",name:"content",defaultValue:n,onChange:this.handleContentChange})),o.a.createElement("div",{className:"field"},o.a.createElement("label",{htmlFor:"note-folder-select"},"Folder"),o.a.createElement("select",{id:"selectedFolder",name:"selectedFolder",defaultValue:a,onChange:this.handleFolderChange},o.a.createElement("option",{value:null},"..."),r.map(function(e){return o.a.createElement("option",{key:e.id,value:e.id},e.name)}))),o.a.createElement("div",{className:"buttons"},o.a.createElement("button",{className:"editButton",type:"submit"},"Edit note"))))}}]),t}(a.Component));D.contextType=b,D.contextType=b;n(207);var T=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={error:null,id:"",name:""},n.handleNameChange=function(e){n.setState({name:e.target.value})},n.handleSubmit=function(e){e.preventDefault();var t=e.target.name.value;n.setState({name:t});var a=n.props.match.params.folderId,o=n.state,r={id:o.id,name:o.name},c="".concat(g.API_ENDPOINT,"/api/folders/").concat(a),l={method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify(r)};fetch(c,l).then(function(e){if(!e.ok)throw new Error("Something went wrong, please try again later")}).then(function(){n.context.updateFolder(r),n.props.history.push("/")}).catch(function(e){n.setState({error:e.message})})},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.folderId;fetch("".concat(g.API_ENDPOINT,"/api/folders/").concat(t),{method:"GET"}).then(function(e){if(!e.ok)throw new Error("Something went wrong, please try again later");return e.json()}).then(function(t){e.setState({id:t.id,name:t.name})}).catch(function(t){e.setState({error:t.message})})}},{key:"render",value:function(){var e=this.state.name;return o.a.createElement("section",{className:"EditFolder"},o.a.createElement("h2",null,"Edit Folder"),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("div",{className:"field"},o.a.createElement("label",{htmlFor:"name-input"},"Name:"),o.a.createElement("input",{type:"text",id:"name",name:"name",defaultValue:e,onChange:this.handleNameChange})),o.a.createElement("div",{className:"buttons"},o.a.createElement("button",{className:"editButton",type:"submit"},"Edit folder"))))}}]),t}(a.Component);T.contextType=b;n(208);var M=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={folders:[]},n.addFolder=function(e){n.setState({folders:[].concat(Object(d.a)(n.state.folders),[e])})},n.mergeFoldersAndNotes=function(e,t){return t.forEach(function(t){var n=e.findIndex(function(e){return e.id===t.folder});e[n].notes||(e[n].notes=[]),e[n].notes.push({id:t.id,name:t.name,content:t.content,date:t.date})}),e},n.addNote=function(e,t){var a=Object(d.a)(e);a[n.state.folders.findIndex(function(e){return e.id===+t.folder})].notes.push(t),n.setState({folders:a})},n.handleDeleteNote=function(e){var t=n.state.folders.map(function(t){return t.notes=t.notes.filter(function(t){return t.id!==e}),t});n.setState({folders:t})},n.handleDeleteFolder=function(e){n.setState({folders:n.state.folders.filter(function(t){return t.id!==e})})},n.updateFolder=function(e){var t=n.state.folders.map(function(t){return t.id===e.id?e:t});n.setState({folders:t})},n.updateNote=function(e){var t=n.state.folders.findIndex(function(t){return t.id===+e.folder}),a=n.state.folders[t],o=a.notes.findIndex(function(t){return t.id===e.id}),r=a.notes[o],c=Object(s.a)({},r,e);a.notes.push(c);var l=[].concat(Object(d.a)(n.state.folders.slice(0,t)),[a],Object(d.a)(n.state.folders.slice(t+1)));n.setState({folders:l})},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;Promise.all([fetch("".concat(g.API_ENDPOINT,"/api/notes")),fetch("".concat(g.API_ENDPOINT,"/api/folders"))]).then(function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1];return n.ok?a.ok?Promise.all([n.json(),a.json()]):a.json().then(function(e){return Promise.reject(e)}):n.json().then(function(e){return Promise.reject(e)})}).then(function(t){var n=Object(i.a)(t,2),a=n[0],o=n[1],r=e.mergeFoldersAndNotes(o,a);e.setState({folders:r})}).catch(function(e){console.error({error:e})})}},{key:"renderNavRoutes",value:function(){return o.a.createElement(o.a.Fragment,null,["/","/folder/:folderId"].map(function(e){return o.a.createElement(v.a,{exact:!0,key:e,path:e,component:y})}),o.a.createElement(v.a,{path:"/note/:noteId",component:O}),o.a.createElement(v.a,{path:"/add-folder",component:O}),o.a.createElement(v.a,{path:"/add-note",component:O}))}},{key:"renderMainRoutes",value:function(){this.state.folders.notes;return o.a.createElement(o.a.Fragment,null,["/","/folder/:folderId"].map(function(e){return o.a.createElement(v.a,{exact:!0,key:e,path:e,component:S})}),o.a.createElement(v.a,{path:"/note/:noteId",component:_}),o.a.createElement(v.a,{path:"/add-folder",component:w}),o.a.createElement(v.a,{path:"/add-note",component:A}),o.a.createElement(v.a,{path:"/folders/:folderId/edit",component:T}),o.a.createElement(v.a,{path:"/notes/:noteId/edit",component:D}))}},{key:"render",value:function(){var e={folders:this.state.folders,notes:this.notes,deleteNote:this.handleDeleteNote,deleteFolder:this.handleDeleteFolder,addNote:this.addNote,addFolder:this.addFolder,updateFolder:this.updateFolder,updateNote:this.updateNote};return o.a.createElement(b.Provider,{value:e},o.a.createElement("div",{className:"App"},o.a.createElement("nav",{className:"App__nav"},this.renderNavRoutes()),o.a.createElement("header",{className:"App__header"},o.a.createElement("h1",null,o.a.createElement(l.b,{to:"/"},"Noteful")," ")),o.a.createElement("main",{className:"App__main"},this.renderMainRoutes())))}}]),t}(a.Component),L=Object(v.e)(M);c.a.render(o.a.createElement(l.a,null,o.a.createElement(L,null)),document.getElementById("root"))},84:function(e,t,n){e.exports=n(209)},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},97:function(e,t,n){}},[[84,1,2]]]);
//# sourceMappingURL=main.ff2418cf.chunk.js.map