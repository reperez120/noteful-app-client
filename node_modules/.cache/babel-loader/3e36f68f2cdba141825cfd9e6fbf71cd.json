{"ast":null,"code":"var _jsxFileName = \"/Users/rachelemilyperez/projects/noteful-app/noteful-app-client/src/EditNote/EditNote.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport './EditNote.css';\nimport ApiContext from '../ApiContext';\nexport default class EditNote extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      error: null,\n      id: \"\",\n      name: \"\",\n      content: \"\",\n      folder: \"\"\n    };\n\n    this.handleNameChange = e => {\n      this.setState({\n        name: e.target.value\n      });\n    };\n\n    this.handleContentChange = e => {\n      this.setState({\n        content: e.target.value\n      });\n    };\n\n    this.handleFolderChange = e => {\n      this.setState({\n        folder: e.target.value\n      });\n    };\n\n    this.resetFields = newFields => {\n      this.setState({\n        name: newFields.name || '',\n        content: newFields.content || '',\n        folder: newFields.folder || ''\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const noteName = e.target.name.value;\n      const noteContent = e.target.content.value;\n      console.log(noteContent);\n      this.setState({\n        name: noteName\n      });\n      const noteId = this.props.match.params.noteId;\n      const _this$state = this.state,\n            id = _this$state.id,\n            name = _this$state.name,\n            content = _this$state.content,\n            folder = _this$state.folder;\n      const newNote = {\n        id,\n        name,\n        content,\n        folder\n      };\n      const url = \"http://localhost:8000/api/notes/\".concat(noteId);\n      const options = {\n        method: 'PATCH',\n        headers: {\n          'content-type': 'application/json'\n        },\n        body: JSON.stringify(newNote)\n      };\n      fetch(url, options).then(res => {\n        if (!res.ok) {\n          throw new Error('Something went wrong, please try again later');\n        }\n\n        return res.json();\n      }).then(() => {\n        console.log(newNote);\n        console.log(this.context.updateNote());\n        this.resetFields(newNote);\n        this.props.history.push('/');\n      }).catch(err => {\n        this.setState({\n          error: err.message\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    const noteId = this.props.match.params.noteId;\n    fetch(\"http://localhost:8000/api/notes/\".concat(noteId), {\n      method: 'GET'\n    }).then(res => {\n      if (!res.ok) {\n        throw new Error('Something went wrong, please try again later');\n      }\n\n      return res.json();\n    }).then(data => {\n      this.setState({\n        id: data.id,\n        name: data.name,\n        content: data.content,\n        folder: data.folder\n      });\n    }).catch(err => {\n      this.setState({\n        error: err.message\n      });\n    });\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          name = _this$state2.name,\n          content = _this$state2.content,\n          folder = _this$state2.folder;\n    const folders = this.context.folders;\n    return React.createElement(\"section\", {\n      className: \"EditNote\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Edit Note\"), React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"name-input\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"Name:\"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"name\",\n      name: \"name\",\n      defaultValue: name,\n      onChange: this.handleNameChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"note-content-input\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"Content\"), React.createElement(\"textarea\", {\n      type: \"text\",\n      id: \"content\",\n      name: \"content\",\n      defaultValue: content,\n      onChange: this.handleContentChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"note-folder-select\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, \"Folder\"), React.createElement(\"select\", {\n      id: \"selectedFolder\",\n      name: \"selectedFolder\",\n      defaultValue: folder,\n      onChange: this.handleFolderChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, \"...\"), folders.map(folder => React.createElement(\"option\", {\n      key: folder.id,\n      value: folder.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, folder.name)))), React.createElement(\"div\", {\n      className: \"buttons\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"editButton\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, \"Edit note\"))));\n  }\n\n}\nEditNote.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.object\n  }),\n  history: PropTypes.shape({\n    push: PropTypes.func\n  }).isRequired\n};\nEditNote.contextType = ApiContext;\nEditNote.contextType = ApiContext;","map":{"version":3,"sources":["/Users/rachelemilyperez/projects/noteful-app/noteful-app-client/src/EditNote/EditNote.js"],"names":["React","Component","PropTypes","ApiContext","EditNote","state","error","id","name","content","folder","handleNameChange","e","setState","target","value","handleContentChange","handleFolderChange","resetFields","newFields","handleSubmit","preventDefault","noteName","noteContent","console","log","noteId","props","match","params","newNote","url","options","method","headers","body","JSON","stringify","fetch","then","res","ok","Error","json","context","updateNote","history","push","catch","err","message","componentDidMount","data","render","folders","map","propTypes","shape","object","func","isRequired","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport './EditNote.css';\nimport ApiContext from '../ApiContext';\n \nexport default class EditNote extends Component {\n    \n    static propTypes = {\n        match: PropTypes.shape({\n          params: PropTypes.object,\n        }),\n        history: PropTypes.shape({\n          push: PropTypes.func,\n        }).isRequired,\n      };\n\n    static contextType = ApiContext\n\n   state = {\n       error: null,\n       id: \"\",\n       name: \"\",\n       content: \"\",\n       folder: \"\"\n   }\n \n   static contextType = ApiContext\n \n   componentDidMount() {\n \n    const noteId  = this.props.match.params.noteId\n\n   fetch(`http://localhost:8000/api/notes/${noteId}`, { method: 'GET'})\n       .then(res => {\n       if(!res.ok) {\n           throw new Error('Something went wrong, please try again later');\n       }\n       return res.json();\n       }) \n   .then(data => {\n        this.setState({\n                id: data.id,\n                name: data.name,\n                content: data.content,\n                folder: data.folder\n        })\n       })\n   .catch(err => {\n       this.setState({\n           error: err.message\n           });\n       })\n   }\n \n   handleNameChange = e => {\n       this.setState({ name: e.target.value })\n     };\n \n   handleContentChange = e => {\n       this.setState({ content: e.target.value })\n   };\n \n   handleFolderChange = e => {\n       this.setState({ folder: e.target.value })\n     };\n\n    resetFields = (newFields) => {\n        this.setState({\n          name: newFields.name || '',\n          content: newFields.content || '',\n          folder: newFields.folder || '',\n        })\n    }\n \n   handleSubmit = e => {\n       e.preventDefault()\n       const noteName = e.target.name.value\n       const noteContent = e.target.content.value\n       console.log(noteContent)\n       this.setState ({\n          name: noteName\n       })\n       const noteId = this.props.match.params.noteId\n       const { id, name, content, folder } = this.state\n       const newNote = { id, name, content, folder }\n       \n       const url = `http://localhost:8000/api/notes/${noteId}`\n       const options = {\n           method: 'PATCH',\n            headers: {\n               'content-type': 'application/json'\n           },\n           body: JSON.stringify(newNote)\n       }\n       fetch(url, options)\n       .then(res => {\n       if(!res.ok) {\n           throw new Error('Something went wrong, please try again later');\n       }\n       return res.json();\n       }) \n       .then(() => {\n           console.log(newNote)\n           console.log(this.context.updateNote())\n           this.resetFields(newNote)\n           this.props.history.push('/')\n       })\n    .catch(err => {\n       this.setState({\n           error: err.message\n           });\n       })\n}\n\n\nrender() {\n   const { name, content, folder  } = this.state\n   const folders = this.context.folders\n   return (\n     <section className='EditNote'>\n       <h2>Edit Note</h2>\n       <form onSubmit={this.handleSubmit}>\n           <div className='field'>\n               <label htmlFor='name-input'>\n               Name:\n               </label>\n               <input\n                   type='text'\n                   id='name'\n                   name='name'\n                   defaultValue={name}\n                   onChange={this.handleNameChange}\n               />\n           </div>\n           <div className='field'>\n             <label htmlFor='note-content-input'>\n               Content\n             </label>\n             <textarea\n             type='text'\n             id='content'\n             name='content'\n             defaultValue={content}\n             onChange={this.handleContentChange}/>\n           </div>\n           <div className='field'>\n             <label htmlFor='note-folder-select'>\n               Folder\n             </label>\n             <select id='selectedFolder' name='selectedFolder' defaultValue={folder} onChange={this.handleFolderChange} >\n               <option value={null}>...</option>\n               {folders.map(folder =>\n                 <option key={folder.id} value={folder.id}>\n                   {folder.name}\n                 </option>\n               )}\n             </select>\n           </div>\n           <div className='buttons'>\n               <button className='editButton' type='submit'>\n               Edit note\n               </button>\n           </div>\n       </form>\n     </section>\n   )\n }\n}\n\n"]},"metadata":{},"sourceType":"module"}