{"ast":null,"code":"var _jsxFileName = \"/Users/rachelemilyperez/projects/notefulorganizingreactcode-app-state/src/App/App.js\";\nimport React, { Component } from 'react';\nimport { Route, Link } from 'react-router-dom';\nimport NoteListNav from '../NoteListNav/NoteListNav';\nimport NotePageNav from '../NotePageNav/NotePageNav';\nimport NoteListMain from '../NoteListMain/NoteListMain';\nimport NotePageMain from '../NotePageMain/NotePageMain';\nimport AddFolder from '../AddFolder/AddFolder';\nimport AddNote from '../AddNote/AddNote';\nimport ApiContext from '../ApiContext';\nimport config from '../config';\nimport NotefulError from '../NotefulError';\nimport './App.css';\nimport { throws } from 'assert';\nimport { withRouter } from 'react-router-dom';\nexport default class App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      notes: [],\n      folders: [],\n      folderName: '',\n      noteNameInput: '',\n      noteContentInput: '',\n      noteFolderSelect: '',\n      noteNameInputVaild: false,\n      formValid: false,\n      validationMessages: {\n        noteNameInput: ''\n      }\n    };\n\n    this.addNewFolder = folderName => {\n      this.setState({\n        folderName\n      });\n    };\n\n    this.handleFolderSubmit = e => {\n      console.log('handleSubmit ran');\n      e.preventDefault();\n      const newFolder = this.state.folderName;\n      const url = 'http://localhost:9090/folders';\n      const options = {\n        method: 'POST',\n        headers: {\n          'content-type': 'application/json'\n        },\n        body: JSON.stringify({\n          name: newFolder\n        })\n      };\n      fetch(url, options).then(res => {\n        if (!res.ok) {\n          throw new Error('Something went wrong, please try again later');\n        }\n\n        return res.json();\n      }).then(data => {\n        this.setState({\n          name: ''\n        });\n        this.addNewFolder(newFolder);\n      }).catch(err => {\n        this.setState({\n          error: err.message\n        });\n      });\n    };\n\n    this.addNewNote = noteNameInput => {\n      console.log('addNewNote ran');\n      this.setState({\n        noteNameInput\n      });\n    };\n\n    this.addNoteContent = noteContentInput => {\n      this.setState({\n        noteContentInput\n      });\n    };\n\n    this.selectFolder = noteFolderSelect => {\n      this.setState({\n        noteFolderSelect\n      });\n    };\n\n    this.handleNoteSubmit = e => {\n      console.log('handleSubmit ran');\n      e.preventDefault();\n      const newNote = this.state.noteNameInput;\n      const newContent = this.state.noteContentInput;\n      const selectedFolder = this.state.noteFolderSelect;\n      const url = 'http://localhost:9090/notes';\n      const options = {\n        method: 'POST',\n        headers: {\n          'content-type': 'application/json'\n        },\n        body: JSON.stringify({\n          name: newNote,\n          folderId: selectedFolder,\n          content: newContent\n        })\n      };\n      fetch(url, options).then(res => {\n        if (!res.ok) {\n          throw new Error('Something went wrong, please try again later');\n        }\n\n        return res.json();\n      }).then(data => {\n        this.setState({\n          name: '',\n          folderId: '',\n          content: '',\n          folders: []\n        });\n      }).catch(err => {\n        this.setState({\n          error: err.message\n        });\n      });\n    };\n\n    this.handleDeleteNote = noteId => {\n      this.setState({\n        notes: this.state.notes.filter(note => note.id !== noteId)\n      });\n    };\n  }\n\n  componentDidMount() {\n    Promise.all([fetch(\"\".concat(config.API_ENDPOINT, \"/notes\")), fetch(\"\".concat(config.API_ENDPOINT, \"/folders\"))]).then(([notesRes, foldersRes]) => {\n      if (!notesRes.ok) return notesRes.json().then(e => Promise.reject(e));\n      if (!foldersRes.ok) return foldersRes.json().then(e => Promise.reject(e));\n      return Promise.all([notesRes.json(), foldersRes.json()]);\n    }).then(([notes, folders]) => {\n      this.setState({\n        notes,\n        folders\n      });\n    }).catch(error => {\n      console.error({\n        error\n      });\n    });\n  }\n\n  renderNavRoutes() {\n    return React.createElement(React.Fragment, null, ['/', '/folder/:folderId'].map(path => React.createElement(Route, {\n      exact: true,\n      key: path,\n      path: path,\n      component: NoteListNav,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    })), React.createElement(Route, {\n      path: \"/note/:noteId\",\n      component: NotePageNav,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/add-folder\",\n      component: NotePageNav,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/add-note\",\n      component: NotePageNav,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }));\n  }\n\n  renderMainRoutes() {\n    return React.createElement(React.Fragment, null, ['/', '/folder/:folderId'].map(path => React.createElement(Route, {\n      exact: true,\n      key: path,\n      path: path,\n      component: NoteListMain,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    })), React.createElement(Route, {\n      path: \"/note/:noteId\",\n      component: NotePageMain,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/add-folder\",\n      render: history => React.createElement(AddFolder, {\n        folderName: this.folderName,\n        addNewFolder: this.addNewFolder,\n        handleFolderSubmit: this.handleFolderSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/add-note\",\n      render: () => React.createElement(AddNote, {\n        noteNameInput: this.noteNameInput,\n        noteContentInput: this.noteContentInput,\n        noteFolderSelect: this.noteFolderSelect,\n        noteNameInputVaild: this.noteNameInputVaild,\n        formVaild: this.formValid,\n        validationMessages: this.validationMessages,\n        addNewNote: this.addNewNote,\n        addNoteContent: this.addNoteContent,\n        selectFolder: this.selectFolder,\n        handleNoteSubmit: this.handleNoteSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }));\n  }\n\n  render() {\n    const value = {\n      notes: this.state.notes,\n      folders: this.state.folders,\n      deleteNote: this.handleDeleteNote\n    };\n    return React.createElement(ApiContext.Provider, {\n      value: value,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, React.createElement(\"nav\", {\n      className: \"App__nav\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, this.renderNavRoutes()), React.createElement(\"header\", {\n      className: \"App__header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, \"Noteful\"), ' ')), React.createElement(\"main\", {\n      className: \"App__main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, this.renderMainRoutes())));\n  }\n\n}\n{\n  /* <Route path='/add-folder' \n  render={() =>\n  <AddFolder\n     folderName={this.folderName}\n     addNewFolder={this.addNewFolder}\n     handleFolderSubmit={this.handleFolderSubmit}\n  />}\n  /> */\n}","map":{"version":3,"sources":["/Users/rachelemilyperez/projects/notefulorganizingreactcode-app-state/src/App/App.js"],"names":["React","Component","Route","Link","NoteListNav","NotePageNav","NoteListMain","NotePageMain","AddFolder","AddNote","ApiContext","config","NotefulError","throws","withRouter","App","state","notes","folders","folderName","noteNameInput","noteContentInput","noteFolderSelect","noteNameInputVaild","formValid","validationMessages","addNewFolder","setState","handleFolderSubmit","e","console","log","preventDefault","newFolder","url","options","method","headers","body","JSON","stringify","name","fetch","then","res","ok","Error","json","data","catch","err","error","message","addNewNote","addNoteContent","selectFolder","handleNoteSubmit","newNote","newContent","selectedFolder","folderId","content","handleDeleteNote","noteId","filter","note","id","componentDidMount","Promise","all","API_ENDPOINT","notesRes","foldersRes","reject","renderNavRoutes","map","path","renderMainRoutes","history","render","value","deleteNote"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Route, Link} from 'react-router-dom';\nimport NoteListNav from '../NoteListNav/NoteListNav';\nimport NotePageNav from '../NotePageNav/NotePageNav';\nimport NoteListMain from '../NoteListMain/NoteListMain';\nimport NotePageMain from '../NotePageMain/NotePageMain';\nimport AddFolder from '../AddFolder/AddFolder';\nimport AddNote from '../AddNote/AddNote';\nimport ApiContext from '../ApiContext';\nimport config from '../config';\nimport NotefulError from '../NotefulError';\nimport './App.css';\nimport { throws } from 'assert';\nimport { withRouter } from 'react-router-dom';\n\nexport default class App extends Component {\n\n    state = {\n        notes: [],\n        folders: [],\n        folderName: '',\n        noteNameInput: '',\n        noteContentInput:'',\n        noteFolderSelect: '',\n        noteNameInputVaild: false,\n        formValid: false,\n        validationMessages: {\n        noteNameInput: ''\n        },\n    };\n\n    addNewFolder = folderName => {\n        this.setState({\n            folderName\n        })\n    };\n\n    // validateNoteNameInputVaild(fieldValue) {\n    //     const fieldErrors = {...this.state.validationMessages};\n    //     let hasError = false;\n    \n    //     fieldValue = fieldValue.trim();\n    //     if(fieldValue.length === 0) {\n    //       fieldErrors.noteNameInput = 'A name is required for the note';\n    //       hasError = true;\n    //     } else {\n    //       fieldErrors.noteNameInput= '';\n    //       hasError = false;\n    //       }\n    //     this.setState({\n    //       validationMessages: fieldErrors,\n    //       noteNameInputVaild: !hasError\n    //     }, this.formValid );\n    //     }\n    //     formValid() {\n    //       this.setState({\n    //         formValid: this.state.noteNameInputValid\n    //       });\n    //     } \n    // };\n    \n  handleFolderSubmit = e => {\n    console.log('handleSubmit ran')\n    e.preventDefault()\n    const newFolder = this.state.folderName;\n    const url = 'http://localhost:9090/folders';\n    const options = {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json'\n      },\n      body: JSON.stringify (\n        {name: newFolder\n        }),\n    }\n    \n    fetch(url, options)\n      .then(res => {\n        if(!res.ok) {\n          throw new Error('Something went wrong, please try again later');\n        }\n        return res.json();\n      })\n      .then(data => {\n        this.setState({\n          name: ''\n        });\n        this.addNewFolder(newFolder);\n      })\n      .catch(err => {\n        this.setState({\n          error: err.message\n        });\n      })\n    }\n    \n    addNewNote = noteNameInput => {\n        console.log('addNewNote ran')\n        this.setState({\n            noteNameInput\n        })\n    };\n    \n    addNoteContent = noteContentInput => {\n        this.setState({\n            noteContentInput\n        })\n    };\n    \n    selectFolder = noteFolderSelect => {\n        this.setState({\n            noteFolderSelect\n        })\n    };\n\n    handleNoteSubmit = e => {\n        console.log('handleSubmit ran')\n        e.preventDefault()\n        const newNote = this.state.noteNameInput;\n        const newContent = this.state.noteContentInput;\n        const selectedFolder = this.state.noteFolderSelect;\n        const url = 'http://localhost:9090/notes';\n        const options = {\n          method: 'POST',\n          headers: {\n            'content-type': 'application/json'\n          },\n          body: JSON.stringify(\n            {\n            name: newNote,\n            folderId: selectedFolder,\n            content: newContent\n        })\n        }\n    \n        fetch(url, options)\n          .then(res => {\n            if(!res.ok) {\n              throw new Error('Something went wrong, please try again later');\n            }\n            return res.json();\n          })\n        .then(data => {\n          this.setState({\n            name: '',\n            folderId: '',\n            content: '',\n            folders: []\n          });\n        })\n        .catch(err => {\n          this.setState({\n            error: err.message\n          });\n        });\n      }\n  \n    componentDidMount() {\n        Promise.all([\n            fetch(`${config.API_ENDPOINT}/notes`),\n            fetch(`${config.API_ENDPOINT}/folders`)\n        ])\n            .then(([notesRes, foldersRes]) => {\n                if (!notesRes.ok)\n                    return notesRes.json().then(e => Promise.reject(e));\n                if (!foldersRes.ok)\n                    return foldersRes.json().then(e => Promise.reject(e));\n\n                return Promise.all([notesRes.json(), foldersRes.json()]);\n            })\n            .then(([notes, folders]) => {\n                this.setState({notes, folders});\n            })\n            .catch(error => {\n                console.error({error});\n            });\n    };\n\n    handleDeleteNote = noteId => {\n        this.setState({\n            notes: this.state.notes.filter(note => note.id !== noteId)\n        });\n    };\n\n    renderNavRoutes() {\n        return (\n            <>\n                {['/', '/folder/:folderId'].map(path => (\n                    <Route\n                        exact\n                        key={path}\n                        path={path}\n                        component={NoteListNav}\n                    />\n                ))}\n                <Route path=\"/note/:noteId\" component={NotePageNav} />\n                <Route path=\"/add-folder\" component={NotePageNav} />\n                <Route path=\"/add-note\" component={NotePageNav} />\n            </>\n        );\n    }\n\n    renderMainRoutes() {\n        return (\n            <>\n                {['/', '/folder/:folderId'].map(path => (\n                    <Route\n                        exact\n                        key={path}\n                        path={path}\n                        component={NoteListMain}\n                    />\n                ))}\n                <Route path=\"/note/:noteId\" component={NotePageMain} />\n\n                <Route path='/add-folder' \n                    render={(history) =>\n                    <AddFolder\n                        folderName={this.folderName}\n                        addNewFolder={this.addNewFolder}\n                        handleFolderSubmit={this.handleFolderSubmit}\n                    />}\n                />\n               <Route path='/add-note'\n                render={() =>\n                    <AddNote\n                    noteNameInput = {this.noteNameInput}\n                    noteContentInput = {this.noteContentInput}\n                    noteFolderSelect = {this.noteFolderSelect}\n                    noteNameInputVaild = {this.noteNameInputVaild}\n                    formVaild = {this.formValid}\n                    validationMessages = {this.validationMessages} \n                    addNewNote = {this.addNewNote }\n                    addNoteContent = {this.addNoteContent}\n                    selectFolder = {this.selectFolder}\n                    handleNoteSubmit ={this.handleNoteSubmit}\n                    \n                    /> }\n                />\n            </>\n        );\n    }\n\n    render() {\n        \n        const value = {\n            notes: this.state.notes,\n            folders: this.state.folders,\n            deleteNote: this.handleDeleteNote\n        };\n        \n        return (\n            <ApiContext.Provider value={value}>\n                <div className=\"App\">\n                    <nav className=\"App__nav\">{this.renderNavRoutes()}</nav>\n                    <header className=\"App__header\">\n                        <h1>\n                            <Link to=\"/\">Noteful</Link>{' '}\n                        </h1>\n                    </header>\n                    <main className=\"App__main\">{this.renderMainRoutes()}</main>\n                </div>\n            </ApiContext.Provider>\n        );\n    }\n}\n\n{/* <Route path='/add-folder' \nrender={() =>\n<AddFolder\n    folderName={this.folderName}\n    addNewFolder={this.addNewFolder}\n    handleFolderSubmit={this.handleFolderSubmit}\n/>}\n/> */}"]},"metadata":{},"sourceType":"module"}